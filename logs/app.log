2026-02-02 16:55:53,266 [INFO] werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.2:5000
2026-02-02 16:55:53,276 [INFO] werkzeug - [33mPress CTRL+C to quit[0m
2026-02-02 16:55:53,283 [INFO] werkzeug -  * Restarting with stat
2026-02-02 16:55:54,361 [WARNING] werkzeug -  * Debugger is active!
2026-02-02 16:55:54,364 [INFO] werkzeug -  * Debugger PIN: 627-558-473
2026-02-02 16:58:36,075 [INFO] werkzeug - 127.0.0.1 - - [02/Feb/2026 16:58:36] "[33mPOST /token/validar HTTP/1.1[0m" 404 -
2026-02-02 16:58:57,738 [INFO] werkzeug - 127.0.0.1 - - [02/Feb/2026 16:58:57] "[33mPOST /token/validar HTTP/1.1[0m" 404 -
2026-02-02 16:59:17,609 [INFO] werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.2:5000
2026-02-02 16:59:17,609 [INFO] werkzeug - [33mPress CTRL+C to quit[0m
2026-02-02 16:59:17,610 [INFO] werkzeug -  * Restarting with stat
2026-02-02 16:59:18,636 [WARNING] werkzeug -  * Debugger is active!
2026-02-02 16:59:18,639 [INFO] werkzeug -  * Debugger PIN: 627-558-473
2026-02-02 16:59:24,110 [INFO] werkzeug - 127.0.0.1 - - [02/Feb/2026 16:59:24] "[33mPOST /token/validar HTTP/1.1[0m" 404 -
2026-02-02 16:59:39,951 [INFO] werkzeug -  * Detected change in 'C:\\apps\\python\\flask\\api-gis\\app\\routes\\__init__.py', reloading
2026-02-02 16:59:40,096 [INFO] werkzeug -  * Restarting with stat
2026-02-02 17:00:04,472 [INFO] werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.2:5000
2026-02-02 17:00:04,473 [INFO] werkzeug - [33mPress CTRL+C to quit[0m
2026-02-02 17:00:04,474 [INFO] werkzeug -  * Restarting with stat
2026-02-02 17:00:05,756 [WARNING] werkzeug -  * Debugger is active!
2026-02-02 17:00:05,759 [INFO] werkzeug -  * Debugger PIN: 627-558-473
2026-02-02 17:00:13,852 [INFO] werkzeug - 127.0.0.1 - - [02/Feb/2026 17:00:13] "[33mPOST /token/validar HTTP/1.1[0m" 404 -
2026-02-02 17:00:20,985 [INFO] werkzeug - 127.0.0.1 - - [02/Feb/2026 17:00:20] "[33mPOST /acceso/validar HTTP/1.1[0m" 404 -
2026-02-02 17:01:22,113 [INFO] werkzeug - 127.0.0.1 - - [02/Feb/2026 17:01:22] "[33mPOST /token/validar HTTP/1.1[0m" 404 -
2026-02-02 17:01:35,896 [INFO] werkzeug -  * Detected change in 'C:\\apps\\python\\flask\\api-gis\\app\\routes\\acceso.py', reloading
2026-02-02 17:01:36,047 [INFO] werkzeug -  * Restarting with stat
2026-02-02 17:01:37,095 [WARNING] werkzeug -  * Debugger is active!
2026-02-02 17:01:37,097 [INFO] werkzeug -  * Debugger PIN: 627-558-473
2026-02-02 17:01:47,653 [INFO] werkzeug - 127.0.0.1 - - [02/Feb/2026 17:01:47] "[32mPOST /token/acceso HTTP/1.1[0m" 308 -
2026-02-02 17:01:47,684 [ERROR] app - ðŸ”´ Error de base de datos: When initializing mapper Mapper[Rol(roles)], expression 'Permission' failed to locate a name ('Permission'). If this is a class name, consider adding this relationship() to the <class 'app.models.rol.Rol'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ~~~~~~~~~~~~^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Permission'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\apps\python\flask\api-gis\app\routes\acceso.py", line 28, in acceso_visor
    db.session.query(Usuario, Rol)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1680, in query
    return self._proxied.query(*entities, **kwargs)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in _set_entities
    coercions.expect(
    ~~~~~~~~~~~~~~~~^
        roles.ColumnsClauseRole,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        post_inspect=True,
        ^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
    ...<5 lines>...
    ) from err
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Rol(roles)], expression 'Permission' failed to locate a name ('Permission'). If this is a class name, consider adding this relationship() to the <class 'app.models.rol.Rol'> class after both dependent classes have been defined.
2026-02-02 17:01:47,810 [INFO] werkzeug - 127.0.0.1 - - [02/Feb/2026 17:01:47] "[35m[1mPOST /token/acceso/ HTTP/1.1[0m" 500 -
2026-02-02 17:02:30,028 [INFO] werkzeug - 127.0.0.1 - - [02/Feb/2026 17:02:30] "[32mPOST /token/acceso HTTP/1.1[0m" 308 -
2026-02-02 17:02:30,034 [ERROR] app - ðŸ”´ Error de base de datos: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Rol(roles)]'. Original exception was: When initializing mapper Mapper[Rol(roles)], expression 'Permission' failed to locate a name ('Permission'). If this is a class name, consider adding this relationship() to the <class 'app.models.rol.Rol'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "C:\apps\python\flask\api-gis\app\routes\acceso.py", line 28, in acceso_visor
    db.session.query(Usuario, Rol)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1680, in query
    return self._proxied.query(*entities, **kwargs)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in _set_entities
    coercions.expect(
    ~~~~~~~~~~~~~~~~^
        roles.ColumnsClauseRole,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        post_inspect=True,
        ^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\apps\python\flask\api-gis\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[Rol(roles)]'. Original exception was: When initializing mapper Mapper[Rol(roles)], expression 'Permission' failed to locate a name ('Permission'). If this is a class name, consider adding this relationship() to the <class 'app.models.rol.Rol'> class after both dependent classes have been defined.
2026-02-02 17:02:30,050 [INFO] werkzeug - 127.0.0.1 - - [02/Feb/2026 17:02:30] "[35m[1mPOST /token/acceso/ HTTP/1.1[0m" 500 -
2026-02-02 17:03:53,286 [INFO] werkzeug -  * Detected change in 'C:\\apps\\python\\flask\\api-gis\\app\\routes\\acceso.py', reloading
2026-02-02 17:03:53,455 [INFO] werkzeug -  * Restarting with stat
2026-02-02 17:03:54,597 [WARNING] werkzeug -  * Debugger is active!
2026-02-02 17:03:54,600 [INFO] werkzeug -  * Debugger PIN: 627-558-473
